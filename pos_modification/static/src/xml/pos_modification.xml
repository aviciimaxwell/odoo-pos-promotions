<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    
    <t t-name="product-serial-number">
        <table>
            <tr>
                <td style="padding-left: 10px;padding-bottom:30px;">Enter Serial Number</td>
                <td style="padding-left: 10px;padding-bottom:30px;">
                    <input type="text" name="product_sr_no" id="product_sr_no" value="" style="width: 200px;height:30px;"/>
                </td>
            </tr>
        </table>
    </t>
    <t t-name="Orderline">
        <li t-attf-class="orderline #{ line.selected ? 'selected' : '' }">
            <span class="product-name">
                <t t-esc="line.get_product().display_name"/>
            </span>
            <span class="price">
                <t t-esc="widget.format_currency(line.get_display_price())"/>
            </span>
            <ul class="info-list">
                <t t-if="line.get_quantity_str() !== '1' || line.selected ">
                    <li class="info">
                        <em>
                            <t t-esc="line.get_quantity_str()" />
                        </em>
                        <t t-esc="line.get_unit().name" />
                        at
                        <t t-esc="widget.format_currency(line.get_unit_price(),'Product Price')" />
                        /
                        <t t-esc="line.get_unit().name" />
                    </li>
                </t>
                <t t-if="line.get_discount_str() !== '0'">
                    <li class="info">
                        With a 
                        <em>
                            <t t-esc="line.get_discount_str()" />%
                        </em>
                        discount
                    </li>
                </t>
                <t t-if="line.get_serial_no() !== 0">
                    <li>
                        Serial No.
                        <em>
                            <t t-esc="line.get_serial_no()" />
                        </em>
                    </li>
                </t>
            </ul>
        </li>
    </t>
    
    <t t-name="XmlReceipt">
        <receipt align='center' width='40' value-thousands-separator='' >
            <t t-if='receipt.company.logo'>
                <img t-att-src='receipt.company.logo' />
                <br/>
            </t>
            <t t-if='!receipt.company.logo'>
                <h1><t t-esc='receipt.company.name' /></h1>
                <br/>
            </t>
            <div font='b'>
                <t t-if='receipt.shop.name'>
                    <div><t t-esc='receipt.shop.name' /></div>
                </t>
                <t t-if='receipt.company.contact_address'>
                    <div><t t-esc='receipt.company.contact_address' /></div>
                </t>
                <t t-if='receipt.company.phone'>
                    <div>Tel:<t t-esc='receipt.company.phone' /></div>
                </t>
                <t t-if='receipt.company.vat'>
                    <div>VAT:<t t-esc='receipt.company.vat' /></div>
                </t>
                <t t-if='receipt.company.email'>
                    <div><t t-esc='receipt.company.email' /></div>
                </t>
                <t t-if='receipt.company.website'>
                    <div><t t-esc='receipt.company.website' /></div>
                </t>
                <t t-if='receipt.header'>
                    <div><t t-esc='receipt.header' /></div>
                </t>
                <t t-if='receipt.cashier'>
                    <div>--------------------------------</div>
                    <div>Served by <t t-esc='receipt.cashier' /></div>
                </t>
            </div>
            <br /><br />

            <!-- Orderlines -->

            <div line-ratio='0.6'>
                <t t-foreach='receipt.orderlines' t-as='line'>
                    <t t-set='simple' t-value='line.discount === 0 and line.unit_name === "Unit(s)" and line.quantity === 1' />
                    <t t-if='simple'>
                        <line>
                            <left><t t-esc='line.product_name' /></left>
                            <right><value><t t-esc='line.price_display' /></value></right>
                        </line>
                        <t t-if='line.serialNumber !== 0'>
                           <line>
                               <left>Serial Number: <value><t t-esc='line.serialNumber' /></value></left>
                           </line> 
                        </t>
                    </t>
                    <t t-if='!simple'>
                        <line><left><t t-esc='line.product_name' /></left></line>
                        <t t-if='line.discount !== 0'>
                            <line indent='1'><left>Discount: <t t-esc='line.discount' />%</left></line>
                        </t>
                        <t t-if='line.serialNumber !== 0'>
                            <line indent='1'><left>Serial Number: <t t-esc='line.serialNumber' /></left></line>
                        </t>
                        <line indent='1'>
                            <left>
                                <value value-decimals='3' value-autoint='on'>
                                    <t t-esc='line.quantity' />
                                </value>
                                <t t-if='line.unit_name !== "Unit(s)"'>
                                    <t t-esc='line.unit_name' /> 
                                </t>
                                x 
                                <value value-decimals='2'>
                                    <t t-esc='line.price' />
                                </value>
                            </left>
                            <right>
                                <value><t t-esc='line.price_display' /></value>
                            </right>
                        </line>
                    </t>
                </t>
            </div>

            <!-- Subtotal -->

            <t t-set='taxincluded' t-value='Math.abs(receipt.subtotal - receipt.total_with_tax) &lt;= 0.000001' />
            <t t-if='!taxincluded'>
                <line><right>--------</right></line>
                <line><left>Subtotal</left><right> <value><t t-esc="receipt.subtotal" /></value></right></line>
                <t t-foreach='receipt.tax_details' t-as='tax'>
                    <line>
                        <left><t t-esc='tax.name' /></left>
                        <right><value><t t-esc='tax.amount' /></value></right>
                    </line>
                </t>
            </t>

            <!-- Total -->

            <line><right>--------</right></line>
            <line size='double-height'>
                <left><pre>        TOTAL</pre></left>
                <right><value><t t-esc='receipt.total_with_tax' /></value></right>
            </line>
            <br/><br/>

            <!-- Payment Lines -->

            <t t-foreach='receipt.paymentlines' t-as='line'>
                <line>
                    <left><t t-esc='line.journal' /></left>
                    <right><value><t t-esc='line.amount'/></value></right>
                </line>
            </t>
            <br/> 

            <line size='double-height'>
                <left><pre>        CHANGE</pre></left>
                <right><value><t t-esc='receipt.change' /></value></right>
            </line>
            <br/>
            
            <!-- Extra Payment Info -->

            <t t-if='receipt.total_discount'>
                <line>
                    <left>Discounts</left>
                    <right><value><t t-esc='receipt.total_discount'/></value></right>
                </line>
            </t>
            <t t-if='taxincluded'>
                <t t-foreach='receipt.tax_details' t-as='tax'>
                    <line>
                        <left><t t-esc='tax.name' /></left>
                        <right><value><t t-esc='tax.amount' /></value></right>
                    </line>
                </t>
            </t>

            <!-- Footer -->
            <t t-if='receipt.footer'>
                <br/>
                <pre><t t-esc='receipt.footer' /></pre>
                <br/>
                <br/>
            </t>

            <br/>
            <div font='b'>
                <div><t t-esc='receipt.name' /></div>
                <div><t t-esc='receipt.date.localestring' /></div>
            </div>

        </receipt>
    </t>
    
    <t t-name="PosTicket">
        <div class="pos-sale-ticket">
            
            <div class="pos-center-align"><t t-esc="new Date().toString(Date.CultureInfo.formatPatterns.shortDate + ' ' +
                Date.CultureInfo.formatPatterns.longTime)"/> <t t-esc="order.get('name')"/></div>
            <br />
            <t t-esc="widget.pos.company.name"/><br />
            Phone: <t t-esc="widget.pos.company.phone || ''"/><br />
            User: <t t-esc="widget.pos.cashier ? widget.pos.cashier.name : widget.pos.user.name"/><br />
            Shop: <t t-esc="widget.pos.shop.name"/><br />
            <br />
            <t t-if="widget.pos.config.receipt_header">
                <div style='text-align:center'>
                    <t t-esc="widget.pos.config.receipt_header" />
                </div>
                <br />
            </t>
            <table>
                <colgroup>
                    <col width='50%' />
                    <col width='25%' />
                    <col width='25%' />
                </colgroup>
                <tr t-foreach="orderlines" t-as="orderline">
                    <td>
                        <t t-esc="orderline.get_product().display_name"/>
                         <t t-if="orderline.get_discount() > 0">
                            <div class="pos-disc-font">
                                With a <t t-esc="orderline.get_discount()"/>% discount
                            </div>
                        </t>
                        
                    </td>
                    <td class="pos-right-align">
                        <t t-esc="orderline.get_quantity_str_with_unit()"/>
                    </td>
                    <t t-if="orderline.get_serial_no()  > 0 ">
                        <td class="pos-right-align">
                            <div class="pos-disc-font">
                                Serial No. <t t-esc="orderline.get_serial_no()"/>
                            </div>
                        </td>
                    </t>
                    <td class="pos-right-align">
                        <t t-esc="widget.format_currency(orderline.get_display_price())"/>
                    </td>
                </tr>
            </table>
            <br />
            <table>
                <tr>
                    <td>Subtotal:</td>
                    <td class="pos-right-align">
                        <t t-esc="widget.format_currency(order.getSubtotal())"/>
                    </td>
                </tr>
                <t t-foreach="order.getTaxDetails()" t-as="taxdetail">
                    <tr>
                        <td><t t-esc="taxdetail.name" /></td>
                        <td class="pos-right-align">
                            <t t-esc="widget.format_currency(taxdetail.amount)" />
                        </td>
                    </tr>
                </t>
                <tr>
                    <td>Discount:</td>
                    <td class="pos-right-align">
                        <t t-esc="widget.format_currency(order.getDiscountTotal())"/>
                    </td>
                </tr>
                <tr class="emph">
                    <td>Total:</td>
                    <td class="pos-right-align">
                        <t t-esc="widget.format_currency(order.getTotalTaxIncluded())"/>
                    </td>
                </tr>
            </table>
            <br />
            <table>
                <tr t-foreach="paymentlines" t-as="line">
                    <td>
                        <t t-esc="line.name"/>
                    </td>
                    <td class="pos-right-align">
                        <t t-esc="widget.format_currency(line.get_amount())"/>
                    </td>
                </tr>
            </table>
            <br />
            <table>
                <tr><td>Change:</td><td class="pos-right-align">
                    <t t-esc="widget.format_currency(order.getChange())"/>
                    </td></tr>
            </table>
            <t t-if="widget.pos.config.receipt_footer">
                <br />
                <div style='text-align:center'>
                    <t t-esc="widget.pos.config.receipt_footer" />
                </div>
            </t>
        </div>
    </t>
    
    <t t-name="OrderWidget">
        <div class="order-container">
            <div class="order-scroller touch-scrollable">
                <div class="order">
                    <ul class="orderlines">
                        <t t-if="orderlines.length === 0">
                            <li class="orderline empty">
                                Your shopping cart is empty
                            </li>
                        </t>
                    </ul>
                    <div class="summary clearfix">
                        <div t-attf-class="line #{orderlines.length === 0 ? 'empty' : ''}">
                            <div class='entry total'>
                                <span class="label">Total: </span> <span class="value">0.00 €</span>
                                <div class='subentry'>Taxes: <span class="value">0.00€</span></div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <!--<button class="create-layby-button"><b>Create Layby</b></button>-->
                        <button class="create-order-button"><b>Create Order</b></button>
                    </div>
                    <div class="manager_pwd_dialog">
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="CreateLaybyWidget">
        <div class="modal-dialog">
            <div class="popup popup-help">
                <p class="message">Are you sure that you want to create LaybyOrder ?</p>
                <div class="footer">
                    <div class="button" id="accept">
                        Create
                    </div>
                    <div class="button" id="cancel">
                        Cancel
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="CreateOrderWidget">
        <div class="modal-dialog">
            <div class="popup popup-help">
                <p class="message">Are you sure that you want to create Order ?</p>
                <div class="footer">
                    <div class="button" id="accept">
                        Create
                    </div>
                    <div class="button" id="cancel">
                        Cancel
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="PosPaymentWidget">
        <div class="extra-label">
            <span class="SelectPaymentButton" />
        </div>
        <div id="payment-layby" class="extra-label">
            <div class="extra-text">
            </div>
        </div>
    </t>

    <t t-name="NewHeaderButtonWidget">
        <div class="header-button-new">
            <t t-esc="widget.label" />
        </div>
    </t>

    <t t-name="LaybyDetails">
        <section class='client-details'>
            <div class='client-picture'>
                <img t-att-src='widget.layby_icon_url(layby.partner_id[0])' />
            </div>
            <div class='client-name'><t t-esc='layby.partner_id[1]'/></div>
            <div class='client-details-box clearfix'>
                <div class='client-details-left'>
                    <div class='client-detail'>
                        <span class='label'>InvoiceNo</span>
                        <span class='detail client-address'><t t-esc='layby.number' /></span>
                    </div>
                    <div class='client-detail'>
                        <span class='label'>Ref</span>
                        <t t-if='layby.origin'>
                            <span class='detail vat'><t t-esc='layby.origin'/></span>
                        </t>
                        <t t-if='!layby.origin'>
                            <span class='detail vat empty'>N/A</span>
                        </t>
                    </div>
                    <div class='client-detail'>
                        <span class='label'>Date</span>
                        <t t-if='layby.date_invoice'>
                            <span class='detail vat'><t t-esc='layby.date_invoice'/></span>
                        </t>
                        <t t-if='!layby.date_invoice'>
                            <span class='detail vat empty'>N/A</span>
                        </t>
                    </div>
                    <div class='client-detail'>
                        <span class='label'>Amount</span>
                        <span class='detail client-email'><t t-esc='widget.format_currency(layby.amount_total)' /></span>
                    </div>
                </div>
                <div class='client-details-right'>

                    <div class='client-detail'>
                        <span class='label'>Balance</span>
                        <span class='detail client-email'><t t-esc='widget.format_currency(layby.residual)' /></span>
                    </div>
                    <div class='client-detail'>
                        <span class='label'>Payment</span>
                        <span class='layby-payment'><input  placeholder='$'/></span>
                    </div>
                    <div class='client-detail'>
                        <span class='label'>Method</span>
                        <select class="detail payment-method-select" name='cash_id' >
                            <t t-foreach="widget.cashregisters" t-as="cash">
                                <option t-att-value="cash.journal.id"><t t-esc="cash.journal.name"/></option>
                            </t>
                        </select>
                    </div>
                    <div class='client-detail'>
                        <span class='label'>Paid</span>
                        <span class='detail layby_paid'>N/A</span>
                    </div>
                    <div class='client-detail'>
                        <span class='label'>Change</span>
                        <span class='detail layby_remain'>N/A</span>
                    </div>
                    <div class='client-detail'>
                        <span class='label'></span>
                        <span class='button payment highlight'>
                            Payment
                        </span>
                        <span class='button print_invoice highlight'>
                            Print
                        </span>

                    </div>

                </div>
            </div>
        </section>
    </t>

    <!--Layby order line-->
    <t t-name="LaybyOrderLine">
        <tr class='layby-order-line' t-att-data-id='layby.id'>
            <td><t t-esc='layby.number' /></td>
            <td><t t-esc='layby.date_invoice' /></td>
            <td><t t-esc='layby.partner_id[1]' /></td>
            <td><t t-if='layby.origin'>
                            <t t-esc='layby.origin'/>
                        </t>
                        <t t-if='!layby.origin'>
                            <span class='detail vat empty'>N/A</span>
                        </t></td>
            <td><t t-esc='widget.format_currency(layby.residual)' /></td>
            <td><t t-esc='widget.format_currency(layby.amount_total)' /></td>
        </tr>
    </t>
    <!--List layby order-->
    <t t-name="LaybyOrderListScreenWidget">
        <div class="clientlist-screen screen">
            <div class="screen-content">
                <section class="top-content">
                    <span class='button back'>
                        <i class='fa fa-angle-double-left'></i>
                        Cancel
                    </span>
                    <span class='searchbox'>
                        <input placeholder='Search Invoices' />
                        <span class='search-clear'></span>
                    </span>
                    <span class='searchbox'></span>
                    <span class='button next highlight'>
                        Reload
                        <i class='fa fa-angle-double-right'></i>
                    </span>
                </section>
                <section class="full-content">
                    <div class='window'>
                        <section class='subwindow collapsed'>
                            <div class='subwindow-container'>
                                <div class='subwindow-container-fix invoice-details-contents'>
                                </div>
                            </div>
                        </section>
                        <section class='subwindow'>
                            <div class='subwindow-container'>
                                <div class='subwindow-container-fix touch-scrollable scrollable-y'>
                                    <table class='layby-order-list'>
                                        <thead>
                                            <tr>
                                                <th>Invoice No</th>
                                                <th>Date</th>
                                                <th>Customer</th>
                                                <th>Layby/Order</th>
                                                <th>Balance</th>
                                                <th>Total</th>
                                            </tr>
                                        </thead>
                                        <tbody class='layby-order-list-contents'>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                </section>
            </div>
        </div>
    </t>
</templates>